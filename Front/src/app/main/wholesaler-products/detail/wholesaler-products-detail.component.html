<o-form-container breadcrumb="yes" breadcrumb-label-columns="es_name" [form]="form">
    <mat-tab-group fxFill>

        <mat-tab label="{{ 'MAIN_DATA' | oTranslate }}">
            <o-form #formdata attr="products_form_edit" service="products" entity="product" fxLayout="column"
                show-header="yes" header-actions="R;U;D" #oDetailForm keys="id" keys-sql-types="INTEGER" columns="id"
                show-header-navigation="yes" (onDataLoaded)="onDataLoaded($event)">

                <o-row attr="row1">
                    <div fxLayout="row wrap" fxLayoutGap="14px" fxFill>
                        <o-image id="image" attr="image" label="IMAGE" width="350px"
                            empty-image="assets/images/no-image.png" sql-type="OTHER"></o-image>
                        <div fxLayout="row wrap" fxLayoutAlign="start start" fxFlex fxLayoutGap="14px">
                            <o-text-input attr="es_name" label="NAME" width="100%" class="form-field"></o-text-input>
                            <o-textarea-input attr="es_description_short" label="SHORT_DESCRIPTION" width="100%"
                                rows="3" class="form-field"></o-textarea-input>
                            <o-textarea-input attr="es_description_long" label="LONG_DESCRIPTION" width="100%" rows="6"
                                class="form-field"></o-textarea-input>
                            <o-currency-input attr="price" label="PRICE" width="95px"></o-currency-input>
                            <o-combo attr="category_id" width="300px" label="CATEGORY" query-on-init="no"
                                query-on-bind="yes" filter="yes" value-column="id" service="categories"
                                entity="category" keys="id" columns="id;es_name" visible-columns="es_name"
                                class="form-field" required="true">
                            </o-combo>
                            <o-combo attr="country_id" label="COUNTRY" width="250px" query-on-init="no"
                                query-on-bind="yes" filter="yes" value-column="id" service="countries" entity="country"
                                keys="id" columns="id;en_name" visible-columns="en_name" class="form-field">
                            </o-combo>
                        </div>
                    </div>
                </o-row>
                <o-row attr="allergens" title="ALLERGENS" icon="food" elevation="1" appearance="none">
                    <div fxLayout="column" fxLayoutAlign="start">
                        <span style="margin-right: 15px">
                            <o-slide-toggle attr="al_altramuces" label="ALTRAMUCES" read-only="no"></o-slide-toggle>
                        </span>
                        <o-slide-toggle attr="al_apio" label="APIO" read-only="no"></o-slide-toggle>
                    </div>
                    <div fxLayout="column" fxLayoutAlign="start">
                        <o-slide-toggle attr="al_cacahuetes" label="CACAHUETES" read-only="no"></o-slide-toggle>
                        <o-slide-toggle attr="al_crustaceos" label="CRUSTACEOS" read-only="no"></o-slide-toggle>
                    </div>
                    <div fxLayout="column" fxLayoutAlign="start">
                        <o-slide-toggle attr="al_cascara" label="CASCARA" read-only="no"></o-slide-toggle>
                        <o-slide-toggle attr="al_gluten" label="GLUTEN" read-only="no"></o-slide-toggle>

                    </div>
                    <div fxLayout="column" fxLayoutAlign="start">
                        <o-slide-toggle attr="al_huevo" label="HUEVO" read-only="no"></o-slide-toggle>
                        <o-slide-toggle attr="al_leche" label="LACTEOS" read-only="no"></o-slide-toggle>

                    </div>
                    <div fxLayout="column" fxLayoutAlign="start">
                        <o-slide-toggle attr="al_moluscos" label="MOLUSCOS" read-only="no"></o-slide-toggle>
                        <o-slide-toggle attr="al_mostaza" label="MOSTAZA" read-only="no"></o-slide-toggle>

                    </div>
                    <div fxLayout="column" fxLayoutAlign="start">
                        <o-slide-toggle attr="al_pescado" label="PESCADO" read-only="no"></o-slide-toggle>
                        <o-slide-toggle attr="al_sesamo" label="SESAMO" read-only="no"></o-slide-toggle>

                    </div>
                    <div fxLayout="column" fxLayoutAlign="start">
                        <o-slide-toggle attr="al_soja" label="SOJA" read-only="no"></o-slide-toggle>
                        <o-slide-toggle attr="al_sulfitos" label="SULFITOS" read-only="no"></o-slide-toggle>

                    </div>
                    <div fxLayout="column" fxLayoutAlign="start">
                        <o-slide-toggle attr="al_vegano" label="NO APTO PARA VEGANOS" read-only="no"></o-slide-toggle>
                    </div>
                </o-row>
            </o-form>
        </mat-tab>
        <mat-tab label="{{ 'SALES' | oTranslate }}">
            <o-form #form attr="products_form_edit" fxLayout="column" show-header="yes" header-actions="R" #oDetailForm
                keys="id" keys-sql-types="INTEGER" show-header-navigation="no" service="products" entity="product">
                <o-table fxFlex service="sales" entity="sale" parent-keys="product_id:id"
                    columns="sale_id;saledate;product_id;sale_price;qty;total"
                    visible-columns="sale_id;saledate;qty;sale_price;total" insert-button="no" delete-button="no"
                    query-rows="8">
                    <o-table-column attr="sale_id" title="ID" class="o-table-column-centered"></o-table-column>
                    <o-table-column attr="saledate" title="SALEDATE" type="date" format="LL"></o-table-column>
                    <o-table-column attr="qty" title="QTY" class="o-table-column-right" type="integer">
                    </o-table-column>
                    <o-table-column attr="sale_price" title="PRICE" type="currency" currency-symbol="€"
                        currency-symbol-position="right" thousand-separator="." decimal-separator=",">
                    </o-table-column>
                    <o-table-column attr="total" title="TOTAL" type="currency" currency-symbol="€"
                        currency-symbol-position="right" thousand-separator="." decimal-separator=",">
                    </o-table-column>
                    <o-table-column-aggregate attr="total" title="TOTAL"></o-table-column-aggregate>
                </o-table>
            </o-form>
        </mat-tab>
    </mat-tab-group>
</o-form-container>